{"type": "command_usage", "source": "journals/al_kharid_warrior_training_2025-01-13.md", "command": "send_command", "purpose": "Execute command", "example": "send_command(\"CLICK_WIDGET 38862854\")", "tags": []}
{"type": "reasoning", "source": "journals/autonomous_combat_interference_2025-01-13.md", "input": "Problem: When running `KILL_LOOP` in multi-combat zones, the autonomous combat system would interfere during gaps between kills, causing the plugin to click different targets than KILL_LOOP intended.", "reasoning": "Root cause: Two issues combined:", "tags": ["combat", "widgets"]}
{"type": "reasoning", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "input": "Problem: `BANK_WITHDRAW` silently fails when items aren't visible in the current bank view. Banks with many items require scrolling, and the command had no way to find items below the fold.", "reasoning": "Root cause: The original implementation in `BankWithdrawCommand.java` only searched visible widget children via `getDynamicChildren()`. Items scrolled out of view have invalid bounds (negative Y or outside container area), causing the search to fail even though the item exists in the bank.", "tags": ["banking", "widgets"]}
{"type": "command_usage", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "command": "get_logs(grep=\"BANK_WITHDRAW\")", "purpose": "See item search attempts and bounds", "example": null, "tags": ["banking", "widgets"]}
{"type": "command_usage", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "command": "scan_widgets(filter_text=\"Search\")", "purpose": "Find bank search button widget ID", "example": null, "tags": ["banking", "widgets"]}
{"type": "command_usage", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "command": "get_game_state(fields=[\"inventory\"])", "purpose": "Verify item actually withdrawn", "example": null, "tags": ["banking", "widgets"]}
{"type": "command_usage", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(grep=\"BANK_WITHDRAW\")", "tags": ["banking", "widgets"]}
{"type": "command_usage", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "command": "scan_widgets", "purpose": "Execute command", "example": "scan_widgets(filter_text=\"Search\")", "tags": ["banking", "widgets"]}
{"type": "command_usage", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "command": "get_game_state", "purpose": "Execute command", "example": "get_game_state(fields=[\"inventory\"])", "tags": ["banking", "widgets"]}
{"type": "lesson", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "title": "Widget.setScrollY() is Read-Only", "problem": "Initial plan was to use `bankContainer.setScrollY(newValue)` to programmatically scroll.", "solution": "```java\n// BAD - setScrollY doesn't work from client code\nbankContainer.setScrollY(currentScroll + 180);  // No effect", "why": "RuneLite's Widget API exposes `getScrollY()` but `setScrollY()` doesn't actually change the scroll position from the client side - it's meant for the game engine's internal use.", "tags": ["banking", "widgets"]}
{"type": "lesson", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "title": "Mouse.scroll() Doesn't Exist", "problem": "Build failed with \"cannot find symbol: method scroll(int)\"", "solution": "Use `Robot.mouseWheel()` directly after positioning mouse over bank container:", "why": "The `Mouse` class in manny plugin doesn't have a scroll method. Only `Keyboard.zoom()` exists which uses `Robot.mouseWheel()` internally but centers mouse on canvas.", "tags": ["banking", "widgets"]}
{"type": "lesson", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "title": "ItemContainer vs Widget Children", "problem": "Needed a way to check if item exists BEFORE attempting to scroll.", "solution": "```java\n// Check existence via ItemContainer (sees everything)\nItemContainer bank = client.getItemContainer(InventoryID.BANK);\nfor (Item item : bank.getItems()) {\n    ItemComposition comp = client.getItemDefinition(item.getId());\n    if (comp.getName().equalsIgnoreCase(itemName)) {\n        // Item confirmed in bank - now scroll to find it visually\n    }\n}", "why": "`client.getItemContainer(InventoryID.BANK)` returns ALL items regardless of scroll position. Widget children only show items with valid screen coordinates.", "tags": ["banking", "widgets"]}
{"type": "lesson", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "title": "Detecting Visible vs Scrolled-Out Items", "problem": "Items exist in widget children even when scrolled out, but their bounds are invalid.", "solution": "```java\n// Check both item bounds validity AND containment within viewport\nRectangle bounds = child.getBounds();\nRectangle containerBounds = bankContainer.getBounds();", "why": "Widget bounds are calculated relative to screen position - items above/below viewport have Y outside container area.", "tags": ["banking", "widgets"]}
{"type": "lesson", "source": "journals/bank_withdraw_scroll_search_2025-01-17.md", "title": "Finding Bank Search Button Dynamically", "problem": "Hardcoded widget ID (786460) might be wrong or change.", "solution": "```java\n// Search for widget with \"Search\" action in bank interface (group 12)\nWidget[] roots = client.getWidgetRoots();\nfor (Widget root : roots) {\n    int groupId = root.getId() >> 16;\n    if (groupId == 12) {  // Bank interface group\n        // Recursively search children for widget with \"Search\" action\n        String[] actions = widget.getActions();\n        if (action.toLowerCase().contains(\"search\")) {\n            return widget.getBounds();\n        }\n    }\n}", "why": "Bank interface widgets don't have well-documented IDs; need runtime discovery.", "tags": ["banking", "widgets"]}
{"type": "reasoning", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "input": "Problem: During extended fishing sessions (~5-6 trips), the RuneLite client would freeze completely. Commands stopped executing, the state file stopped updating, and the only recovery was a full client restart. This happened consistently after 20-40 minutes of operation.", "reasoning": "Root cause: **The `readFromClient()` method in `ClientThreadHelper.java` uses a single 5-second timeout with no retry.** When the client thread is busy (loading screens, heavy rendering, garbage collection), the latch times out and throws a `RuntimeException` that cascades up and kills the entire command.\n\n```java\n// The problematic code (ClientThreadHelper.java:129-137)\nboolean completed = latch.await(5, TimeUnit.SECONDS);\nif (!completed) {\n    // This exception crashes the entire command chain\n    throw n", "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "command_usage", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "command": "get_logs(level=\"ERROR\", grep=\"timeout\")", "purpose": "Find timeout occurrences", "example": null, "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "command_usage", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "command": "is_alive()", "purpose": "Quick check if plugin is frozen", "example": null, "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "command_usage", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "command": "check_health()", "purpose": "Detailed health including state file staleness", "example": null, "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "command_usage", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "command": "find_blocking_patterns()", "purpose": "Static analysis of potential blocking code", "example": null, "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "command_usage", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "command": "get_blocking_trace()", "purpose": "Runtime analysis (requires instrumentation)", "example": null, "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "command_usage", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(level=\"ERROR\", grep=\"timeout\")", "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "lesson", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "title": "One Long Timeout Is Worse Than Multiple Short Ones", "problem": "A single 5-second timeout gave no chance for recovery.", "solution": "```java\n// BAD - one 5s timeout, throws on failure\npublic <T> T readFromClient(Supplier<T> getter) {\n    latch.await(5, TimeUnit.SECONDS);\n    if (!completed) throw new RuntimeException(\"timeout\");\n}", "why": "The client thread might be busy for 3-4 seconds but free up. A single 5s timeout either succeeds or catastrophically fails.", "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "lesson", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "title": "Return Null Instead of Throwing on Timeout", "problem": "The exception from `readFromClient()` propagated up through `CameraSystem` \u2192 `InteractionSystem` \u2192 `CommandProcessor` \u2192 entire command fails.", "solution": "Added `readFromClientSafe()` that catches timeout exceptions and returns null:", "why": "Exception-based error handling is appropriate for programming errors, not for transient conditions like \"client thread is temporarily busy.\"", "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "lesson", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "title": "Callers Must Handle Null Gracefully", "problem": "Even with safe methods, callers like `CameraSystem.setCameraPitchSmooth()` would NPE on null.", "solution": "Check for null and skip non-critical operations:", "why": null, "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "lesson", "source": "journals/client_thread_timeout_fix_2025-01-11.md", "title": "The CAMERA_STABILIZE Command Is a Major Timeout Source", "problem": "The fishing routine calls `CAMERA_STABILIZE` 4 times per loop. Each call does multiple `readFromClient()` calls for pitch reading/verification.", "solution": "Made camera operations resilient:\n- Use `readFromClientWithRetry()` for initial pitch read\n- Use `readFromClientSafe()` for verification (log warning, don't crash)\n- Skip adjustment if reads fail", "why": "Camera operations are non-essential - if they fail, fishing still works. But they were crashing the entire routine.", "tags": ["combat", "fishing", "quests", "threading"]}
{"type": "command_usage", "source": "journals/cooking_routine_2025-01-04.md", "command": "scan_tile_objects", "purpose": "through walls!**", "example": "scan_tile_objects(\"door\")", "tags": ["cooking"]}
{"type": "reasoning", "source": "journals/cooking_routine_timing_analysis_2025-01-12.md", "input": "Problem: The cooking_lumbridge.yaml routine needed timing benchmarks to identify optimization opportunities. Without timing data, it's impossible to know which phases are bottlenecks vs fixed delays.", "reasoning": "Root cause: No prior systematic timing data existed for the routine. Each step's duration was unknown, making optimization guesswork.", "tags": ["cooking"]}
{"type": "code_correction", "source": "journals/cooking_routine_timing_analysis_2025-01-12.md", "bad_code": "# GOOD - Bottom-floor (2.5s)\naction: INTERACT_OBJECT Staircase Bottom-floor\nawait_condition: plane:0\n\n# BAD - Climb-down twice (5s+)\naction: INTERACT_OBJECT Staircase Climb-down  # plane 2 -> 1\naction: INTERACT_OBJECT Staircase Climb-down  # plane 1 -> 0", "bad_explanation": "GOOD - Bottom-floor (2.5s); BAD - Climb-down twice (5s+); plane 2 -> 1", "good_code": "# GOOD - ensure interface closed\nsend_command(\"BANK_CLOSE\")\nsend_command(\"KEY_PRESS Escape\")  # Safety\nsleep(1)\nsend_command(\"GOTO ...\")", "good_explanation": "GOOD - ensure interface closed; Safety", "tags": ["cooking"]}
{"type": "code_correction", "source": "journals/cooking_routine_timing_analysis_2025-01-12.md", "bad_code": "# BAD - sends withdraw too soon\nsend_command(\"BANK_OPEN\")\nsleep(2)  # Not enough!\nsend_command(\"BANK_WITHDRAW ...\")  # May interrupt BANK_OPEN\n\n# GOOD - wait for BANK_OPEN to fully complete\nsend_command(\"BANK_OPEN\")\nsleep(5)  # Allow camera prep + menu verification\nsend_command(\"BANK_WITHDRAW ...\")", "bad_explanation": "BAD - sends withdraw too soon; Not enough!; May interrupt BANK_OPEN", "good_code": null, "good_explanation": null, "tags": ["cooking"]}
{"type": "lesson", "source": "journals/cooking_routine_timing_analysis_2025-01-12.md", "title": "Interface Timing Causes Failures", "problem": "Trip 3 banking failed because BANK_WITHDRAW was sent before BANK_OPEN completed", "solution": "```python\n# BAD - sends withdraw too soon\nsend_command(\"BANK_OPEN\")\nsleep(2)  # Not enough!\nsend_command(\"BANK_WITHDRAW ...\")  # May interrupt BANK_OPEN", "why": "BANK_OPEN was interrupted by the next command, leaving bank interface in unknown state", "tags": ["cooking"]}
{"type": "lesson", "source": "journals/cooking_routine_timing_analysis_2025-01-12.md", "title": "GOTO After Bank Close is Essential", "problem": "Trip 4 GOTO failed with \"stuck\" error after closing bank", "solution": "Press Escape to ensure interfaces are closed before navigation", "why": "Bank interface was still open (BANK_CLOSE hadn't completed)", "tags": ["cooking"]}
{"type": "reasoning", "source": "journals/deposit_box_grid_fix_2025-01-08.md", "input": "Problem: Deposit box item clicking was unreliable - the mouse would click on the wrong cell or miss items entirely when trying to deposit.", "reasoning": "Root cause: The deposit box grid position calculation had incorrect offsets. The original code used arbitrary guesses (`x + 170`, `y + 15`) that were never visually verified.", "tags": ["banking", "widgets"]}
{"type": "reasoning", "source": "journals/deposit_box_lessons_2025-01-08.md", "input": "Problem: The deposit box interface wouldn't respond to `deposit_item()` commands. Clicks were landing in wrong positions - clicking at (284, 124) when the actual item was at (450+, 140+).", "reasoning": "Root cause: **The deposit box doesn't create real widgets for items.** Unlike the regular bank interface which has clickable child widgets, the deposit box renders items directly from `InventoryID.INVENTORY` onto a canvas without creating individual widget elements.", "tags": ["banking", "widgets"]}
{"type": "reasoning", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "input": "Problem: Combat system targets NPCs behind closed doors. Player walks to the door, gets stuck with \"I can't reach that!\" spam in chat, and combat loop fails repeatedly without recovery. This causes the KILL_LOOP to waste iterations and eventually trigger roaming behavior that moves the player away from valid targets.", "reasoning": "Root cause: The LOS (line-of-sight) check in `handleKillLoop` uses `worldMapData` to detect walls and gates, but this is **static map data**. Closed doors are **dynamic obstacles** - they exist as TileObjects with an \"Open\" action that can be interacted with. The LOS check sees through doors because the underlying tile is walkable when the door is open.\n\n**Code location:** `PlayerHelpers.java:16724-16762` (LOS checking loop)\n\nThe LOS check correctly identifies walls (`isWalkableGlobal`) and gates (`isGate`)", "tags": ["combat", "navigation", "quests"]}
{"type": "anti_pattern", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "pattern": "use `interactionSystem.interactWithTileObject(obj, action)`", "reason": "method doesn't exist. Use `interactWithGameObject(objectName, action, radius)` instead.", "tags": ["combat", "navigation", "quests"]}
{"type": "anti_pattern", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "pattern": "assume doors are in the outer PlayerHelpers class", "reason": "`handleKillLoop` is in the static inner `CommandProcessor` class. Methods accessing `interactionSystem` must be in CommandProcessor.", "tags": ["combat", "navigation", "quests"]}
{"type": "anti_pattern", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "pattern": "rely only on LOS checking to filter unreachable NPCs", "reason": "closed doors aren't detected by static map data.", "tags": ["combat", "navigation", "quests"]}
{"type": "command_usage", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "command": "get_logs(grep=\"DOOR-STUCK\")", "purpose": "See door detection and opening attempts", "example": null, "tags": ["combat", "navigation", "quests"]}
{"type": "command_usage", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "command": "get_logs(grep=\"blocked by WALL\")", "purpose": "See LOS failures (but won't show door issues)", "example": null, "tags": ["combat", "navigation", "quests"]}
{"type": "command_usage", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "command": "scan_tile_objects(object_name=\"door\")", "purpose": "Find nearby doors and their actions", "example": null, "tags": ["combat", "navigation", "quests"]}
{"type": "command_usage", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(grep=\"DOOR-STUCK\")", "tags": ["combat", "navigation", "quests"]}
{"type": "command_usage", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(grep=\"blocked by WALL\")", "tags": ["combat", "navigation", "quests"]}
{"type": "command_usage", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "command": "scan_tile_objects", "purpose": "Execute command", "example": "scan_tile_objects(object_name=\"door\")", "tags": ["combat", "navigation", "quests"]}
{"type": "lesson", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "title": "Stuck Detection Pattern: Position + Combat State", "problem": "Combat command sent, but player didn't move and combat didn't start.", "solution": "```java\n// Track position BEFORE attack\nWorldPoint preAttackPos = helper.readFromClient(() -> {\n    Player player = client.getLocalPlayer();\n    return player != null ? player.getWorldLocation() : null;\n});", "why": "When stuck at a door, the player walks to the door tile but can't path through to reach the NPC. They stop moving without entering combat.", "tags": ["combat", "navigation", "quests"]}
{"type": "lesson", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "title": "Door Detection: Actions Reveal State", "problem": "Need to find closed doors vs already-open doors.", "solution": "```java\n// Get actions from ObjectComposition\nString[] actions = helper.readFromClient(() -> {\n    ObjectComposition comp = client.getObjectDefinition(obj.getId());\n    if (comp != null) {\n        // Handle morphing objects (varbit state changes)\n        ObjectComposition realComp = comp.getImpostorIds() != null\n            ? comp.getImpostor() : comp;\n        return realComp != null ? realComp.getActions() : null;\n    }\n    return null;\n});", "why": "Doors with \"Open\" action are closed. Doors with \"Close\" action are already open.", "tags": ["combat", "navigation", "quests"]}
{"type": "lesson", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "title": "Door Types: Search Multiple Patterns", "problem": "Searching just \"door\" misses \"gate\" and \"fence\" obstacles.", "solution": "```java\n// Search multiple patterns\nString[] doorPatterns = {\"door\", \"gate\", \"fence\"};", "why": "Different obstacle types have different names but same blocking behavior.", "tags": ["combat", "navigation", "quests"]}
{"type": "lesson", "source": "journals/door_stuck_combat_lessons_2025-01-12.md", "title": "Doors are WallObjects, Not GameObjects", "problem": "Initial attempt to find doors using GameObject search failed.", "solution": "Use `gameHelpers.findTileObjectsByName()` which searches ALL TileObject types:\n- GameObject (normal scenery)\n- WallObject (doors, gates, fences)\n- DecorativeObject\n- GroundObject", "why": "Doors, gates, and fences are typically `WallObject` type, not `GameObject`.", "tags": ["combat", "navigation", "quests"]}
{"type": "code_correction", "source": "journals/external_widget_inspector_lessons_2026-01-18.md", "bad_code": "# BAD - All toolbar tabs resolve to same widget\nwidget_id = 35913791  # (548 << 16) | 63 - parent only\n\n# GOOD - Include nested index\nselection = \"548:63:3001\"  # Skills tab\nselection = \"548:63:3002\"  # Quest List tab\nselection = \"548:63:3003\"  # Inventory tab", "bad_explanation": "BAD - All toolbar tabs resolve to same widget; (548 << 16) | 63 - parent only; GOOD - Include nested index", "good_code": null, "good_explanation": null, "tags": ["combat", "quests", "widgets"]}
{"type": "anti_pattern", "source": "journals/external_widget_inspector_lessons_2026-01-18.md", "pattern": "assume overlay class names match usage", "reason": "Always grep for the variable registration", "tags": ["combat", "quests", "widgets"]}
{"type": "anti_pattern", "source": "journals/external_widget_inspector_lessons_2026-01-18.md", "pattern": "hardcode widget scan ranges", "reason": "Widget children can be at any index", "tags": ["combat", "quests", "widgets"]}
{"type": "anti_pattern", "source": "journals/external_widget_inspector_lessons_2026-01-18.md", "pattern": "use packed ID alone for nested children", "reason": "Need `group:child:nested` format", "tags": ["combat", "quests", "widgets"]}
{"type": "command_usage", "source": "journals/external_widget_inspector_lessons_2026-01-18.md", "command": "grep -n \"widgetInspectorOverlay\" MannyPlugin.java", "purpose": "Find which overlay class is registered", "example": null, "tags": ["combat", "quests", "widgets"]}
{"type": "command_usage", "source": "journals/external_widget_inspector_lessons_2026-01-18.md", "command": "find_widget(text=\"Inventory\")", "purpose": "Discover toolbar tab widgets", "example": null, "tags": ["combat", "quests", "widgets"]}
{"type": "command_usage", "source": "journals/external_widget_inspector_lessons_2026-01-18.md", "command": "scan_widgets(filter_text=\"Quest\")", "purpose": "Full widget scan with filter", "example": null, "tags": ["combat", "quests", "widgets"]}
{"type": "command_usage", "source": "journals/external_widget_inspector_lessons_2026-01-18.md", "command": "scan_widgets", "purpose": "Execute command", "example": "scan_widgets(filter_text=\"Quest\")", "tags": ["combat", "quests", "widgets"]}
{"type": "lesson", "source": "journals/external_widget_inspector_lessons_2026-01-18.md", "title": "MannyPlugin Has Two Widget Inspector Overlays", "problem": "File-based selection worked (file written, file read) but no bounding box appeared.", "solution": "```java\n// WRONG - This overlay is NOT used by MannyPlugin\nUIOverlays.java -> class WidgetInspectorOverlay", "why": "Modified `UIOverlays.WidgetInspectorOverlay` but MannyPlugin registers `WidgetInspectorTool.Overlay`.", "tags": ["combat", "quests", "widgets"]}
{"type": "lesson", "source": "journals/external_widget_inspector_lessons_2026-01-18.md", "title": "Widget Nested Child Index Encoding", "problem": "Clicking toolbar tabs in inspector didn't highlight because they share parent ID.", "solution": "```python\n# BAD - All toolbar tabs resolve to same widget\nwidget_id = 35913791  # (548 << 16) | 63 - parent only", "why": "Nested children don't have unique packed IDs - need `group:child:nested` format.", "tags": ["combat", "quests", "widgets"]}
{"type": "reasoning", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "input": "Problem: During Karamja fishing automation, each ferry trip (Port Sarim \u2194 Karamja) required 8+ dialogue clicks, consuming ~20 tool calls per round trip. The routine should have taken 2 tool calls per trip.", "reasoning": "Root cause: Used `INTERACT_NPC Captain_Tobias Talk-to` instead of `INTERACT_NPC Captain_Tobias Travel`. The `Talk-to` action opens full dialogue requiring:\n1. Click continue (NPC greeting)\n2. Select \"Yes please\" option\n3. Click continue (fare confirmation)\n4. Wait for travel animation\n\nThe `Travel` action right-clicks and selects Travel directly from the context menu, skipping ALL dialogue.", "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "code_correction", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "bad_code": "# BAD - Opens dialogue, requires 8+ clicks\nsend_command(\"INTERACT_NPC Captain_Tobias Talk-to\")\nclick_continue()  # Greeting\nclick_text(\"Yes please\")  # Option\nclick_continue()  # Confirmation\n# ... more clicks\n\n# GOOD - Right-click menu, skips all dialogue\nsend_command(\"INTERACT_NPC Captain_Tobias Travel\")  # Port Sarim \u2192 Karamja\nsend_command(\"INTERACT_NPC Customs_officer Travel\")  # Karamja \u2192 Port Sarim", "bad_explanation": "BAD - Opens dialogue, requires 8+ clicks; Greeting; Option", "good_code": null, "good_explanation": null, "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "code_correction", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "bad_code": "# BAD - Manual loop with 20+ tool calls per trip\nsend_command(\"FISH swordfish\")\n# ... wait ...\nsend_command(\"GOTO 2954 3147 0\")\nsend_command(\"INTERACT_NPC Customs_officer Talk-to\")\n# ... 8 dialogue clicks ...\n\n# GOOD - Use the existing routine\nexecute_routine(routine_path=\"routines/skilling/fishing_karamja_harpoon.yaml\")", "bad_explanation": "BAD - Manual loop with 20+ tool calls per trip; ... wait ...; ... 8 dialogue clicks ...", "good_code": null, "good_explanation": null, "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "anti_pattern", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "pattern": "use `Talk", "reason": "to` for utility NPCs - Check right-click menu for direct actions first", "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "anti_pattern", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "pattern": "implement manual loops when routines exist", "reason": "Check `routines/` directory first", "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "anti_pattern", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "pattern": "assume dialogue is required", "reason": "Many interactions have shortcut actions", "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "command_usage", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "command": "query_nearby(name_filter=\"Captain\")", "purpose": "See NPC and available actions", "example": null, "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "command_usage", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "command": "get_command_examples(command=\"INTERACT_NPC\")", "purpose": "See how routines use the command", "example": null, "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "command_usage", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "command": "query_nearby", "purpose": "Execute command", "example": "query_nearby(name_filter=\"Captain\")", "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "command_usage", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "command": "get_command_examples", "purpose": "Execute command", "example": "get_command_examples(command=\"INTERACT_NPC\")", "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "lesson", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "title": "Use Travel Action for Ferry NPCs", "problem": "Manually navigated 8+ dialogue screens per ferry trip, wasting tool calls.", "solution": "```python\n# BAD - Opens dialogue, requires 8+ clicks\nsend_command(\"INTERACT_NPC Captain_Tobias Talk-to\")\nclick_continue()  # Greeting\nclick_text(\"Yes please\")  # Option\nclick_continue()  # Confirmation\n# ... more clicks", "why": "Assumed Talk-to was the only way to travel. Didn't check the routine file or test right-click menu.", "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "lesson", "source": "journals/ferry_npc_travel_action_2026-01-17.md", "title": "Check Existing Routines Before Manual Execution", "problem": "Implemented manual fishing loop instead of using existing `fishing_karamja_harpoon.yaml` routine.", "solution": "```python\n# BAD - Manual loop with 20+ tool calls per trip\nsend_command(\"FISH swordfish\")\n# ... wait ...\nsend_command(\"GOTO 2954 3147 0\")\nsend_command(\"INTERACT_NPC Customs_officer Talk-to\")\n# ... 8 dialogue clicks ...", "why": "Started with manual steps to debug, then never switched back to routine.", "tags": ["combat", "fishing", "quests", "widgets"]}
{"type": "code_correction", "source": "journals/fishing_karamja_2025-01-07.md", "bad_code": "# BAD\nINTERACT_NPC Captain Tobias Pay-fare\n\n# GOOD\nINTERACT_NPC Captain_Tobias Pay-fare", "bad_explanation": "BAD; GOOD", "good_code": null, "good_explanation": null, "tags": ["fishing"]}
{"type": "code_correction", "source": "journals/fishing_karamja_2025-01-07.md", "bad_code": "# BAD: Assuming RuneLite is managed\nsend_command(\"FISH lobster\")  # Might not work if not managed\n\n# BAD: Spaces in NPC names\nINTERACT_NPC Captain Tobias Travel\n\n# BAD: Assuming action names\nINTERACT_NPC Banker Bank  # Check logs for actual action name\n\n# BAD: Trusting FISH command for Cage spots\nFISH lobster  # Will click on nearest \"Fishing spot\" - likely wrong type", "bad_explanation": "BAD: Assuming RuneLite is managed; Might not work if not managed; BAD: Spaces in NPC names", "good_code": null, "good_explanation": null, "tags": ["fishing"]}
{"type": "anti_pattern", "source": "journals/gamescope_multi_instance_and_process_management_2026-01-18.md", "pattern": "kill unmanaged processes assuming they're orphans", "reason": "verify first", "tags": ["combat"]}
{"type": "anti_pattern", "source": "journals/gamescope_multi_instance_and_process_management_2026-01-18.md", "pattern": "restart killed processes without asking", "reason": "takes over management unexpectedly", "tags": ["combat"]}
{"type": "anti_pattern", "source": "journals/gamescope_multi_instance_and_process_management_2026-01-18.md", "pattern": "assume gamescope can only run one instance", "reason": null, "tags": ["combat"]}
{"type": "command_usage", "source": "journals/gamescope_multi_instance_and_process_management_2026-01-18.md", "command": "ps aux \\", "purpose": "grep runelite`", "example": "Find ALL RuneLite processes", "tags": ["combat"]}
{"type": "command_usage", "source": "journals/gamescope_multi_instance_and_process_management_2026-01-18.md", "command": "runelite_status(list_all=True)", "purpose": "Only shows MCP-managed processes", "example": null, "tags": ["combat"]}
{"type": "command_usage", "source": "journals/gamescope_multi_instance_and_process_management_2026-01-18.md", "command": "DISPLAY=:N xdotool search --name \".\"", "purpose": "Check if display has windows", "example": null, "tags": ["combat"]}
{"type": "command_usage", "source": "journals/gamescope_multi_instance_and_process_management_2026-01-18.md", "command": "ls /tmp/.X11-unix/", "purpose": "See all active X displays", "example": null, "tags": ["combat"]}
{"type": "lesson", "source": "journals/gamescope_multi_instance_and_process_management_2026-01-18.md", "title": "Don't Kill Processes Without Verification", "problem": "Saw 3 RuneLite processes, MCP showed only 1 managed (aux). Killed the other 2 assuming they were duplicates.", "solution": "Before killing any process, verify what's actually running on each:", "why": null, "tags": ["combat"]}
{"type": "code_correction", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "bad_code": "# BAD - guessing the name\nsend_command(\"INTERACT_OBJECT coffin Open\")\n\n# GOOD - scan first, use exact name\nscan_tile_objects(\"coffin\")\n# Returns: {\"name\": \"coffin\", ...} -- wait, lowercase?\n# Try capitalized anyway since OSRS displays names that way\nsend_command(\"INTERACT_OBJECT Coffin Open\")  # Works!", "bad_explanation": "BAD - guessing the name; GOOD - scan first, use exact name; Returns: {\"name\": \"coffin\", ...} -- wait, lowercase?", "good_code": null, "good_explanation": null, "tags": ["navigation", "quests"]}
{"type": "command_usage", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "command": "get_transitions(radius=20)", "purpose": "See all doors, stairs, ladders with state and distance", "example": null, "tags": ["navigation", "quests"]}
{"type": "command_usage", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "command": "scan_tile_objects(\"door\", max_distance=25)", "purpose": "Find doors (larger radius for distant ones)", "example": null, "tags": ["navigation", "quests"]}
{"type": "command_usage", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "command": "get_logs(level=\"ALL\", grep=\"INTERACT\")", "purpose": "Check if command executed and why it failed", "example": null, "tags": ["navigation", "quests"]}
{"type": "command_usage", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "command": "get_command_response()", "purpose": "See actual success/failure after command", "example": null, "tags": ["navigation", "quests"]}
{"type": "command_usage", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "command": "scan_tile_objects", "purpose": "Execute command", "example": "scan_tile_objects(\"door\")", "tags": ["navigation", "quests"]}
{"type": "command_usage", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "command": "get_transitions", "purpose": "Execute command", "example": "get_transitions(radius=20)", "tags": ["navigation", "quests"]}
{"type": "command_usage", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "command": "scan_tile_objects", "purpose": "Execute command", "example": "scan_tile_objects(\"door\", max_distance=25)", "tags": ["navigation", "quests"]}
{"type": "command_usage", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "command": "get_logs", "purpose": "distant ones) |", "example": "get_logs(level=\"ALL\", grep=\"INTERACT\")", "tags": ["navigation", "quests"]}
{"type": "lesson", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "title": "Always Use get_transitions() Before Indoor Navigation", "problem": "Walked to graveyard coffin, couldn't interact, didn't know why.", "solution": "```python\n# BEFORE any indoor action\ntransitions = get_transitions(radius=15)\n# Returns: {\"nearest\": [{\"type\": \"door\", \"name\": \"Door\", \"state\": \"closed\", \"direction\": \"south\"}]}", "why": "Door at (3247, 3193) was blocking access - invisible without scanning.", "tags": ["navigation", "quests"]}
{"type": "lesson", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "title": "Scan For Exact Object Names Before Interacting", "problem": "`INTERACT_OBJECT coffin Open` silently failed.", "solution": "```python\n# BAD - guessing the name\nsend_command(\"INTERACT_OBJECT coffin Open\")", "why": "Case mismatch - game uses `Coffin`.", "tags": ["navigation", "quests"]}
{"type": "lesson", "source": "journals/indoor_navigation_and_questing_2025-01-16.md", "title": "Verify Transition Actions, Don't Assume", "problem": "Went to staircase expecting `Climb-down`, only had `Climb-up`.", "solution": "```python\n# Use get_transitions() to see actual actions\ntransitions = get_transitions()\n# Shows: {\"stairs\": [{\"actions\": [\"Climb-up\"], ...}],\n#         \"ladders\": [{\"actions\": [\"Climb-down\"], ...}]}\n# Now I know: use LADDER to go down, not staircase!", "why": "Wizard Tower has separate objects for up/down.", "tags": ["navigation", "quests"]}
{"type": "code_correction", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "bad_code": "# GOOD\nINTERACT_OBJECT Large_door Open\nINTERACT_OBJECT Cooking_range Cook\nUSE_ITEM_ON_OBJECT Raw shrimps Cooking_range\n\n# BAD\nINTERACT_OBJECT Large door Open  # Missing underscore\nINTERACT_OBJECT Door Open        # Too generic, might get wrong door\nINTERACT_OBJECT Range Cook       # Incomplete name", "bad_explanation": "GOOD; BAD; Missing underscore", "good_code": null, "good_explanation": null, "tags": ["cooking", "navigation", "widgets"]}
{"type": "anti_pattern", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "pattern": "click toward destination without scanning first", "reason": null, "tags": ["cooking", "navigation", "widgets"]}
{"type": "anti_pattern", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "pattern": "use `INTERACT_OBJECT Door Open` without specifying which door", "reason": null, "tags": ["cooking", "navigation", "widgets"]}
{"type": "anti_pattern", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "pattern": "assume object names", "reason": "always scan for exact names", "tags": ["cooking", "navigation", "widgets"]}
{"type": "anti_pattern", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "pattern": "continue after failure without re", "reason": "scanning", "tags": ["cooking", "navigation", "widgets"]}
{"type": "anti_pattern", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "pattern": "trust that \"nearest\" is \"correct\"", "reason": null, "tags": ["cooking", "navigation", "widgets"]}
{"type": "command_usage", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "command": "scan_tile_objects", "purpose": "Find exact object names", "example": "`scan_tile_objects(\"door\")`", "tags": ["cooking", "navigation", "widgets"]}
{"type": "command_usage", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "command": "query_nearby", "purpose": "Get NPCs, objects, items", "example": "`query_nearby()`", "tags": ["cooking", "navigation", "widgets"]}
{"type": "command_usage", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "command": "get_game_state", "purpose": "Current position, inventory", "example": "Check after each move", "tags": ["cooking", "navigation", "widgets"]}
{"type": "command_usage", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "command": "scan_environment", "purpose": "Full spatial context", "example": "**NEW** - use before indoor nav", "tags": ["cooking", "navigation", "widgets"]}
{"type": "command_usage", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "command": "scan_tile_objects", "purpose": "3212 3215 0` without checking surroundings.", "example": "scan_tile_objects(\"Door\")", "tags": ["cooking", "navigation", "widgets"]}
{"type": "command_usage", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "command": "scan_tile_objects", "purpose": "USE_ITEM) | Works with spaces | Items use spaces, ", "example": "scan_tile_objects(\"partial_name\")", "tags": ["cooking", "navigation", "widgets"]}
{"type": "command_usage", "source": "journals/indoor_navigation_lessons_2025-01-04.md", "command": "scan_tile_objects", "purpose": "Execute command", "example": "scan_tile_objects(\"door\")", "tags": ["cooking", "navigation", "widgets"]}
{"type": "reasoning", "source": "journals/indoor_navigation_transitions_2025-01-16.md", "input": "Problem: Indoor navigation repeatedly failed with \"I can't reach that!\" errors. Doors blocking paths were invisible to standard scanning tools, leading to wasted attempts and misdiagnosed \"case sensitivity\" issues.", "reasoning": "Root cause: `query_nearby()` only returns GameObjects - it **excludes WallObjects** (doors, gates, fences). When navigating indoors, the critical blockers (closed doors) were invisible.\n\nThe suspected \"case sensitivity\" issue (e.g., \"coffin\" vs \"Coffin\") was a misdiagnosis. Investigation revealed:\n- `findGameObjectsByName()` - already uses `.toLowerCase().contains()` (GameEngine.java:1904)\n- `findTileObjectsByName()` - already uses `.toLowerCase().contains()` (GameEngine.java:1996)\n- `getNPC()` - already us", "tags": ["combat", "navigation", "quests", "threading"]}
{"type": "code_correction", "source": "journals/indoor_navigation_transitions_2025-01-16.md", "bad_code": "# BAD - misses doors/gates/fences\nquery_nearby()  # Only GameObjects\n\n# GOOD - finds all navigable transitions including WallObjects\nget_transitions(radius=15)\n# Returns: doors, stairs, ladders, trapdoors, portals, gates\n# Includes open/closed state!", "bad_explanation": "BAD - misses doors/gates/fences; Only GameObjects; GOOD - finds all navigable transitions including WallObjects", "good_code": null, "good_explanation": null, "tags": ["combat", "navigation", "quests", "threading"]}
{"type": "command_usage", "source": "journals/indoor_navigation_transitions_2025-01-16.md", "command": "get_transitions()", "purpose": "Find ALL navigable transitions (doors, stairs, ladders) with state", "example": null, "tags": ["combat", "navigation", "quests", "threading"]}
{"type": "command_usage", "source": "journals/indoor_navigation_transitions_2025-01-16.md", "command": "scan_tile_objects(\"door\")", "purpose": "Search for specific object type including WallObjects", "example": null, "tags": ["combat", "navigation", "quests", "threading"]}
{"type": "command_usage", "source": "journals/indoor_navigation_transitions_2025-01-16.md", "command": "get_logs(grep=\"INTERACT\")", "purpose": "See what actually happened when interaction failed", "example": null, "tags": ["combat", "navigation", "quests", "threading"]}
{"type": "command_usage", "source": "journals/indoor_navigation_transitions_2025-01-16.md", "command": "scan_tile_objects", "purpose": "Execute command", "example": "scan_tile_objects(\"door\")", "tags": ["combat", "navigation", "quests", "threading"]}
{"type": "command_usage", "source": "journals/indoor_navigation_transitions_2025-01-16.md", "command": "get_logs", "purpose": "specific object type including WallObjects |", "example": "get_logs(grep=\"INTERACT\")", "tags": ["combat", "navigation", "quests", "threading"]}
{"type": "lesson", "source": "journals/indoor_navigation_transitions_2025-01-16.md", "title": "WallObjects Are Invisible to query_nearby", "problem": "Attempted to reach a coffin behind a fence. `query_nearby()` showed the coffin but no fence or door.", "solution": "Use `get_transitions()` or `scan_tile_objects()` which search ALL TileObject types:", "why": "`query_nearby()` only queries GameObjects. Doors, gates, and fences are WallObjects - a different TileObject type.", "tags": ["combat", "navigation", "quests", "threading"]}
{"type": "lesson", "source": "journals/indoor_navigation_transitions_2025-01-16.md", "title": "Door State Detection via Actions", "problem": "Couldn't tell if a door was open or closed without trying to interact.", "solution": "`get_transitions()` automatically detects state:", "why": "Doors have either \"Open\" or \"Close\" action based on current state.", "tags": ["combat", "navigation", "quests", "threading"]}
{"type": "lesson", "source": "journals/indoor_navigation_transitions_2025-01-16.md", "title": "Don't Misdiagnose Without Checking", "problem": "Assumed case sensitivity when \"coffin\" didn't work. Spent time planning a fix for a non-issue.", "solution": "Always check logs first:", "why": "The actual problem (door blocking path) was invisible. Brain jumped to \"name must be wrong\" without evidence.", "tags": ["combat", "navigation", "quests", "threading"]}
{"type": "reasoning", "source": "journals/interact_object_menu_index_mismatch_2026-01-18.md", "input": "Problem: `INTERACT_OBJECT Tin Mine` consistently clicks \"Examine\" instead of \"Mine\" even though \"Mine\" is visible in the menu. The system reports finding the option at the wrong array index.", "reasoning": "Root cause: **NOT FULLY DIAGNOSED** - Investigation ongoing.\n\nThe bug manifests as an index mismatch between what the search finds and what actually gets clicked:\n\n```\nMenu after right-click:\n  [0] Option='Cancel'\n  [1] Option='Examine' | Target='Tin rocks'\n  [2] Option='Walk here'\n  [3] Option='Mine' | Target='Tin rocks'\n\nFound option 'Mine' at targetIndex=1  <-- BUG: Mine is at [3], not [1]!\n\n[MENU-VERIFY] Expected: 'Mine', Actual: 'Examine'  <-- Clicked wrong option\n```", "tags": ["navigation", "widgets"]}
{"type": "anti_pattern", "source": "journals/interact_object_menu_index_mismatch_2026-01-18.md", "pattern": "assume menu entries are static", "reason": "they change when right-click menu opens", "tags": ["navigation", "widgets"]}
{"type": "anti_pattern", "source": "journals/interact_object_menu_index_mismatch_2026-01-18.md", "pattern": "rely solely on object definition names for menu target matching", "reason": null, "tags": ["navigation", "widgets"]}
{"type": "anti_pattern", "source": "journals/interact_object_menu_index_mismatch_2026-01-18.md", "pattern": "trust log output without verifying with DEBUG", "reason": "level `[MATCH]` logs", "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/interact_object_menu_index_mismatch_2026-01-18.md", "command": "get_logs(level=\"ALL\", since_seconds=30)", "purpose": "See DEBUG-level `[MATCH]` logs showing exact comparison values", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/interact_object_menu_index_mismatch_2026-01-18.md", "command": "get_logs(grep=\"MENU-DEBUG\")", "purpose": "See menu entries and found index", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/interact_object_menu_index_mismatch_2026-01-18.md", "command": "get_logs(grep=\"MENU-VERIFY\")", "purpose": "See expected vs actual click result", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/interact_object_menu_index_mismatch_2026-01-18.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(level=\"ALL\", since_seconds=30)", "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/interact_object_menu_index_mismatch_2026-01-18.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(grep=\"MENU-DEBUG\")", "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/interact_object_menu_index_mismatch_2026-01-18.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(grep=\"MENU-VERIFY\")", "tags": ["navigation", "widgets"]}
{"type": "reasoning", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "input": "Problem: `find_and_click_widget(\"Bronze dagger\")` consistently equipped the Bronze pickaxe instead of the Bronze dagger. Despite finding the correct item, clicks landed on the wrong inventory slot.", "reasoning": "Root cause: **Two separate bugs compounding:**\n\n1. **ScanWidgetsCommand.java** - Inventory items (group 149) returned the container's bounds instead of calculating each item's grid position. All inventory items shared the same bounds (560, 282), regardless of their actual slot.\n\n2. **find_and_click_widget (routine.py)** - Even with correct bounds, it passed `CLICK_WIDGET {container_id} \"{action}\"` to Java, which searched for the FIRST child widget with that action - finding Bronze pickaxe (slot 7) before Br", "tags": ["widgets"]}
{"type": "code_correction", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "bad_code": "# BAD - Java re-searches and finds wrong item\nclick_command = f'CLICK_WIDGET {widget_id} \"{action}\"'\n\n# GOOD - click at the bounds we already found\nclick_x = bounds[\"x\"] + bounds[\"width\"] // 2\nclick_y = bounds[\"y\"] + bounds[\"height\"] // 2\nsubprocess.run([\"xdotool\", \"mousemove\", str(click_x), str(click_y), \"click\", \"1\"],\n               env={**os.environ, \"DISPLAY\": display})", "bad_explanation": "BAD - Java re-searches and finds wrong item; GOOD - click at the bounds we already found", "good_code": null, "good_explanation": null, "tags": ["widgets"]}
{"type": "anti_pattern", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "pattern": "rely on `CLICK_WIDGET {id} \"{action}\"` when multiple items have the same action", "reason": "it finds the first match, not your target", "tags": ["widgets"]}
{"type": "anti_pattern", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "pattern": "trust Java mouse methods for actual clicking", "reason": "verify with xdotool if clicks aren't registering", "tags": ["widgets"]}
{"type": "anti_pattern", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "pattern": "assume widget.getBounds() returns correct positions for container children", "reason": "inventory, deposit box, bank all need grid calculation", "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "command": "find_widget(text=\"item\")", "purpose": "Check returned bounds - if multiple items have same bounds, grid calc is broken", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "command": "get_game_state(fields=[\"inventory_full\"])", "purpose": "Get actual slot numbers for items", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "command": "get_screenshot()", "purpose": "Verify mouse position (check tooltip)", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "command": "DISPLAY=:2 xdotool mousemove X Y click 1", "purpose": "Test if clicking works at all", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "command": "get_game_state", "purpose": "Execute command", "example": "get_game_state(fields=[\"inventory_full\"])", "tags": ["widgets"]}
{"type": "lesson", "source": "journals/inventory_item_clicking_wrong_item_2026-01-18.md", "title": "Java Mouse.click() Doesn't Register - Use xdotool", "problem": "`CLICK_AT`, `MOUSE_CLICK`, and `send_input(click)` all moved the mouse correctly (tooltips confirmed hover) but clicks never registered.", "solution": "Use `xdotool` for clicking:", "why": "Unknown - possibly Java AWT event generation issue with Wayland/XWayland or RuneLite's input handling.", "tags": ["widgets"]}
{"type": "code_correction", "source": "journals/manny_plugin_lessons_2025-01-04.md", "bad_code": "# BAD - doesn't work when disconnected\nwith open(command_file, \"w\") as f:\n    f.write(\"MOUSE_CLICK left\\n\")\n\n# GOOD - works regardless of game state\nsubprocess.run([\"xdotool\", \"mousemove\", \"--window\", window_id, str(x), str(y), \"click\", \"1\"])", "bad_explanation": "BAD - doesn't work when disconnected; GOOD - works regardless of game state", "good_code": null, "good_explanation": null, "tags": []}
{"type": "command_usage", "source": "journals/manny_plugin_lessons_2025-01-04.md", "command": "SCAN_BANK", "purpose": "List all items in bank with exact names", "example": null, "tags": []}
{"type": "command_usage", "source": "journals/manny_plugin_lessons_2025-01-04.md", "command": "BANK_CHECK <itemId>", "purpose": "Check quantity of item by ID", "example": null, "tags": []}
{"type": "command_usage", "source": "journals/manny_plugin_lessons_2025-01-04.md", "command": "SCAN_WIDGETS [filterText]", "purpose": "Find visible UI widgets", "example": null, "tags": []}
{"type": "command_usage", "source": "journals/manny_plugin_lessons_2025-01-04.md", "command": "query_nearby", "purpose": "Find NPCs, objects, ground items", "example": null, "tags": []}
{"type": "code_correction", "source": "journals/quest_automation_lessons_2025-01-15.md", "bad_code": "# BAD - spaces cause parsing errors\nsend_command(\"INTERACT_OBJECT Spinning wheel Spin\")\n\n# GOOD - underscores work correctly\nsend_command(\"INTERACT_OBJECT Spinning_wheel Spin\")", "bad_explanation": "BAD - spaces cause parsing errors; GOOD - underscores work correctly", "good_code": null, "good_explanation": null, "tags": ["quests"]}
{"type": "code_correction", "source": "journals/quest_automation_lessons_2025-01-15.md", "bad_code": "# BAD - may timeout\nsend_command(\"GOTO 3189 3276 0\")  # 30+ tiles\n\n# GOOD - intermediate waypoints\nsend_command(\"GOTO 3200 3250 0\")  # First segment\nsend_command(\"GOTO 3189 3276 0\")  # Second segment", "bad_explanation": "BAD - may timeout; 30+ tiles; GOOD - intermediate waypoints", "good_code": null, "good_explanation": null, "tags": ["quests"]}
{"type": "reasoning", "source": "journals/quest_status_command_response_2025-01-16.md", "input": "Problem: `GET_QUEST_STATUS f2p` command executed successfully and logs showed \"Retrieved 23 quests\", but the response file `/tmp/manny_response.json` only contained `{\"message\": \"Quest status retrieved\"}` instead of the full quest data.", "reasoning": "Root cause: The `CommandBase.execute()` method automatically calls `writeSuccess(getSuccessMessage(args))` AFTER `executeCommand()` returns. This overwrote my detailed response:\n\n**Flow causing the bug** (`CommandBase.java:56-71`):\n```java\nboolean success = executeCommand(args);  // My code calls writeSuccess(result)\nif (success) {\n    String successMsg = getSuccessMessage(args);\n    if (successMsg != null) {\n        writeSuccess(successMsg);  // OVERWRITES my result!\n    }\n}\n```\n\nMy `executeCommand()` call", "tags": ["quests"]}
{"type": "command_usage", "source": "journals/quest_status_command_response_2025-01-16.md", "command": "cat /tmp/manny_response.json", "purpose": "Check actual response content", "example": null, "tags": ["quests"]}
{"type": "command_usage", "source": "journals/quest_status_command_response_2025-01-16.md", "command": "get_logs(grep=\"QUEST\")", "purpose": "Verify command executed and data was retrieved", "example": null, "tags": ["quests"]}
{"type": "command_usage", "source": "journals/quest_status_command_response_2025-01-16.md", "command": "Read `CommandBase.java:56-71", "purpose": "Understand automatic response writing flow", "example": null, "tags": ["quests"]}
{"type": "command_usage", "source": "journals/quest_status_command_response_2025-01-16.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(grep=\"QUEST\")", "tags": ["quests"]}
{"type": "lesson", "source": "journals/quest_status_command_response_2025-01-16.md", "title": "Commands with Structured Data Must Return null from getSuccessMessage()", "problem": "Quest data was written correctly, then immediately overwritten by the default success message.", "solution": "```java\n// BAD - default implementation returns a message that overwrites your data\n@Override\nprotected String getSuccessMessage(String args) {\n    return \"Quest status retrieved\";\n}", "why": "CommandBase assumes simple commands only need a message string, not a data Map.", "tags": ["quests"]}
{"type": "lesson", "source": "journals/quest_status_command_response_2025-01-16.md", "title": "ResponseWriter Has Two writeSuccess() Overloads", "problem": "I initially tried `writeSuccess(jsonString)` thinking it would preserve the JSON.", "solution": "```java\n// BAD - wraps in message object\nwriteSuccess(gson.toJson(result));  // Becomes {\"message\": \"{...escaped json...}\"}", "why": "`writeSuccess(String)` wraps the string in `{\"message\": \"...\"}`, losing structure.", "tags": ["quests"]}
{"type": "code_correction", "source": "journals/session_2025-01-04.md", "bad_code": "# \u274c Click toward destination through walls\nGOTO 3212 3215 0\n\n# \u274c Open \"nearest door\" blindly\nINTERACT_OBJECT Door Open\n\n# \u274c Assume object names\nINTERACT_OBJECT Range Cook  # Wrong - it's \"Cooking_range\"", "bad_explanation": "\u274c Click toward destination through walls; \u274c Open \"nearest door\" blindly; \u274c Assume object names", "good_code": null, "good_explanation": null, "tags": ["cooking", "navigation", "widgets"]}
{"type": "reasoning", "source": "journals/session_recording_design_2025-01-16.md", "input": "Problem: Debugging failed autonomous sessions was painful. When a quest failed or a routine broke, there was no way to see:\n- What commands were sent in what order\n- What state changes occurred\n- Where exactly things went wrong\n\nManual reconstruction required grepping logs and correlating timestamps - tedious and error-prone.", "reasoning": "Root cause: No observability layer existed between Claude Code and the plugin. Commands went into `/tmp/manny_command.txt` and state came out of `/tmp/manny_state.json`, but nothing recorded the causal chain.", "tags": ["quests", "widgets"]}
{"type": "code_correction", "source": "journals/session_recording_design_2025-01-16.md", "bad_code": "# BAD - Full state every time\n- type: state\n  inventory: [... 28 items ...]\n  skills: [... 23 skills ...]\n  # ~100 lines per event\n\n# GOOD - Delta only (what changed)\n- type: state_delta\n  changes:\n    location: {x: 3243, y: 3208}\n    inventory_added: [\"Ghostspeak amulet\"]\n    # ~5 lines per event", "bad_explanation": "BAD - Full state every time; ~100 lines per event; GOOD - Delta only (what changed)", "good_code": null, "good_explanation": null, "tags": ["quests", "widgets"]}
{"type": "command_usage", "source": "journals/session_recording_design_2025-01-16.md", "command": "get_command_history", "purpose": "Execute command", "example": "get_command_history(last_n, date)", "tags": ["quests", "widgets"]}
{"type": "command_usage", "source": "journals/session_recording_design_2025-01-16.md", "command": "get_session_events", "purpose": "Execute command", "example": "get_session_events(last_n)", "tags": ["quests", "widgets"]}
{"type": "lesson", "source": "journals/session_recording_design_2025-01-16.md", "title": "MCP-Side Recording is Sufficient (No Plugin Changes Needed)", "problem": "Initial proposal suggested plugin-side (Java) recording as \"recommended\" with MCP-side as \"fallback.\"", "solution": "```python\n# MCP-side captures everything we need:\n# 1. Commands (via send_command wrapper)\n# 2. State changes (via get_game_state wrapper)\n# 3. Claude's descriptions and reasoning (MCP-only context)", "why": null, "tags": ["quests", "widgets"]}
{"type": "lesson", "source": "journals/session_recording_design_2025-01-16.md", "title": "Delta-Only State Recording (Critical for File Size)", "problem": "Full state snapshots would create massive session files (~2500 tokens per snapshot).", "solution": "```python\n# BAD - Full state every time\n- type: state\n  inventory: [... 28 items ...]\n  skills: [... 23 skills ...]\n  # ~100 lines per event", "why": "Game state includes 28 inventory slots, 23 skills, 11 equipment slots, combat info, etc. Recording this on every `get_game_state` call would explode file size.", "tags": ["quests", "widgets"]}
{"type": "lesson", "source": "journals/session_recording_design_2025-01-16.md", "title": "Hybrid: Always-On Commands + Explicit Sessions", "problem": "Initially rejected always-on, but realized a hybrid approach works best.", "solution": "```python\n# ALWAYS happening (lightweight):\n# /tmp/manny_sessions/commands_2025-01-16.yaml\n# Every send_command() appends: timestamp + command", "why": null, "tags": ["quests", "widgets"]}
{"type": "lesson", "source": "journals/session_recording_design_2025-01-16.md", "title": "Lazy Imports to Avoid Circular Dependencies", "problem": "Session module needs to be imported by commands.py and monitoring.py, but session.py also uses the registry.", "solution": "```python\n# In commands.py and monitoring.py:\n_session_recorder = None", "why": "Python circular import errors would crash the server.", "tags": ["quests", "widgets"]}
{"type": "reasoning", "source": "journals/shop_buy_menu_matching_2025-01-12.md", "input": "Problem: `SHOP_BUY Mithril scimitar 1` command found the item in the shop but clicked \"Buy 10\" instead of \"Buy 1\", spending 10x the expected gold. The logs showed \"Menu option 'Buy 1' not found\" even though the menu clearly contained it.", "reasoning": "Root cause: Two bugs in `matchesMenuEntry()` at `PlayerHelpers.java:5262`:\n\n1. **Color tag asymmetry**: The menu entry's target was stripped of color tags, but the search target was not. When comparing `\"Mithril scimitar\"` (stripped) with `\"<col=ff9040>Mithril scimitar</col>\"` (not stripped), `contains()` returned false.\n\n2. **Substring matching**: `\"buy 10\".contains(\"buy 1\")` returns TRUE because \"buy 1\" is a substring. Menu entries are ordered [Buy 50, Buy 10, Buy 5, Buy 1], so forward search matched \"Buy", "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_buy_menu_matching_2025-01-12.md", "command": "get_logs(grep=\"SHOP_BUY\")", "purpose": "See what menu entries were found and which was clicked", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_buy_menu_matching_2025-01-12.md", "command": "find_widget(text=\"scimitar\")", "purpose": "Check if shop items have real widgets", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_buy_menu_matching_2025-01-12.md", "command": "get_logs(level=\"DEBUG\", grep=\"MATCH\")", "purpose": "See exact/partial matching decisions", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_buy_menu_matching_2025-01-12.md", "command": "get_logs", "purpose": "see if real ones exist", "example": "get_logs(grep=\"SHOP_BUY\")", "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_buy_menu_matching_2025-01-12.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(level=\"DEBUG\", grep=\"MATCH\")", "tags": ["widgets"]}
{"type": "reasoning", "source": "journals/shop_interaction_tool_gaps_2025-01-12.md", "input": "Problem: Attempted to buy a mithril scimitar from Zeke's scimitar shop in Al Kharid. Despite the shop interface being open, the item being found, and the \"Buy 1\" menu option existing, no purchase could be completed through any available MCP tool.", "reasoning": "Root cause: Multiple tool gaps compounded to make shop purchases impossible:\n\n1. **SHOP_BUY command** - Color tag matching failure in menu option comparison\n2. **click_widget** - Only supports left-click (default action), no action parameter\n3. **send_input** - Coordinate system mismatch with 2x UI scaling\n4. **click_text** - Doesn't scan right-click context menus", "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_interaction_tool_gaps_2025-01-12.md", "command": "get_logs(grep=\"SHOP\")", "purpose": "See exactly where SHOP_BUY failed", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_interaction_tool_gaps_2025-01-12.md", "command": "find_widget(text=\"Mithril\")", "purpose": "Verify widget is found with correct bounds", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_interaction_tool_gaps_2025-01-12.md", "command": "get_screenshot()", "purpose": "Visual confirmation of what's on screen", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_interaction_tool_gaps_2025-01-12.md", "command": "click_widget(..., bounds={...})", "purpose": "Click with bounds works, but only left-click", "example": null, "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_interaction_tool_gaps_2025-01-12.md", "command": "click_text", "purpose": "open context menu. Menu showed \"Buy 1 Mithril scim", "example": "click_text(\"Buy 1\")", "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_interaction_tool_gaps_2025-01-12.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(grep=\"SHOP\")", "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_widget_click_issue_2025-01-07.md", "command": "send_command", "purpose": "click quantity button: ", "example": "send_command(\"CLICK_WIDGET 19660809\")", "tags": ["widgets"]}
{"type": "command_usage", "source": "journals/shop_widget_click_issue_2025-01-07.md", "command": "send_command", "purpose": "click item: ", "example": "send_command(\"CLICK_WIDGET 19660816\")", "tags": ["widgets"]}
{"type": "reasoning", "source": "journals/tutorial_island_automation_2026-01-18.md", "input": "Problem: `INTERACT_OBJECT Tin_rocks Mine` consistently clicks \"Examine\" instead of \"Mine\" on right-click menus.", "reasoning": "Root cause: The menu array is ordered bottom-to-top, but the click Y-coordinate calculation treats it as top-to-bottom.\n\n**Menu Array:**\n```\n[0] Cancel      <- Bottom of rendered menu\n[1] Examine     <- System clicks HERE (targetIndex=1)\n[2] Walk here\n[3] Mine        <- System SHOULD click here (top of menu)\n```\n\n**Key Log Evidence:**\n```\n[MENU-DEBUG]   [0] Option='Cancel'\n[MENU-DEBUG]   [1] Option='Examine' | StrippedTarget='Tin rocks'\n[MENU-DEBUG]   [2] Option='Walk here'\n[MENU-DEBUG]   [3] Option='Mine' ", "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_2026-01-18.md", "command": "get_logs(level=\"ALL\", since_seconds=30, grep=\"INTERACT\")", "purpose": "See exact menu entries and click positions", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_2026-01-18.md", "command": "scan_tile_objects(\"Tin\")", "purpose": "Find object names and locations", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_2026-01-18.md", "command": "get_screenshot()", "purpose": "Visual confirmation of game state", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_2026-01-18.md", "command": "find_widget(text=\"Continue\")", "purpose": "Lightweight widget search", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_2026-01-18.md", "command": "get_game_state(fields=[\"dialogue\"])", "purpose": "Check dialogue.hint for next action", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_2026-01-18.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(level=\"ALL\", since_seconds=30, grep=\"INTERACT\")", "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_2026-01-18.md", "command": "scan_tile_objects", "purpose": "Execute command", "example": "scan_tile_objects(\"Tin\")", "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_2026-01-18.md", "command": "get_game_state", "purpose": "Execute command", "example": "get_game_state(fields=[\"dialogue\"])", "tags": ["navigation", "widgets"]}
{"type": "reasoning", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "input": "Problem: Tutorial Island automation revealed multiple interface gaps and broken commands that required manual intervention. The biggest blockers were: spell casting on NPCs (CAST_SPELL_NPC broken), dialogue advancement issues, and inventory widget bounds returning wrong positions.", "reasoning": "Root cause: Multiple issues stem from:\n1. **CAST_SPELL_NPC**: Command exists but causes client-breaking behavior\n2. **Dialogue handling**: KEY_PRESS space doesn't consistently advance dialogue on Tutorial Island\n3. **Widget bounds**: Inventory grid calculation was wrong; equipment stats panel uses dynamic widgets with -1,-1 bounds", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "code_correction", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "bad_code": "# BAD - causes client issues\nsend_command(\"CAST_SPELL_NPC Wind_Strike Chicken\")\n\n# WORKAROUND - manual intervention required\n# 1. Click Wind Strike spell in magic tab\n# 2. Click on chicken\n# Status: NEEDS FIX in plugin", "bad_explanation": "BAD - causes client issues; WORKAROUND - manual intervention required; 1. Click Wind Strike spell in magic tab", "good_code": "# Correct sequence:\nclick_text(\"Yes\")   # Continue with tutorial\nclick_text(\"No\")    # Decline Ironman mode\nclick_text(\"continue\")  # Multiple times until teleport", "good_explanation": "Correct sequence:; Continue with tutorial; Decline Ironman mode", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "code_correction", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "bad_code": "# BAD - unreliable on Tutorial Island\nsend_command(\"KEY_PRESS space\")\nsend_command(\"KEY_PRESS space\")  # repeat hoping it works\n\n# GOOD - directly clicks the text\nclick_text(\"continue\")  # Partial match works\nclick_text(\"Click here to continue\")  # Full text also works", "bad_explanation": "BAD - unreliable on Tutorial Island; repeat hoping it works; GOOD - directly clicks the text", "good_code": null, "good_explanation": null, "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "code_correction", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "bad_code": "# BAD - may fail if too far\nsend_command(\"INTERACT_OBJECT Door Open\")\n\n# GOOD - walk to door, then open\nsend_command(\"GOTO 3124 3124 0\")  # Position in front of door\n# Wait for arrival\nsend_command(\"INTERACT_OBJECT Door Open\")", "bad_explanation": "BAD - may fail if too far; GOOD - walk to door, then open; Position in front of door", "good_code": null, "good_explanation": null, "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "code_correction", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "bad_code": "# BAD - trying to click items while stats panel is open\nequip_item(\"Bronze dagger\")  # Fails - bounds are -1,-1\n\n# GOOD - close panel first\nsend_command(\"KEY_PRESS Escape\")  # Close equipment stats panel\nequip_item(\"Bronze dagger\")  # Now works", "bad_explanation": "BAD - trying to click items while stats panel is open; Fails - bounds are -1,-1; GOOD - close panel first", "good_code": null, "good_explanation": null, "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "anti_pattern", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "pattern": "use KEY_PRESS space repeatedly for dialogue", "reason": "use click_text(\"continue\")", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "anti_pattern", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "pattern": "assume CAST_SPELL_NPC works", "reason": "it's broken, needs manual intervention", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "anti_pattern", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "pattern": "click doors from far away", "reason": "walk to position first", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "anti_pattern", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "pattern": "use coordinate clicking (send_input click x y)", "reason": "causes server disconnections", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "anti_pattern", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "pattern": "open equipment stats panel before clicking inventory items", "reason": null, "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "command": "get_dialogue()", "purpose": "See dialogue type, hint, and options", "example": null, "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "command": "get_game_state(fields=[\"location\", \"dialogue\"])", "purpose": "Check position and dialogue state efficiently", "example": null, "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "command": "find_widget(text=\"X\")", "purpose": "Discover widget IDs by text/action", "example": null, "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "command": "query_nearby()", "purpose": "See what NPCs and objects are around", "example": null, "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "command": "click_text(\"X\")", "purpose": "Click dialogue options or UI text", "example": null, "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "command": "get_game_state", "purpose": "Execute command", "example": "get_game_state(fields=[\"location\", \"dialogue\"])", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "command": "click_text", "purpose": "Execute command", "example": "click_text(\"X\")", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "command_usage", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "command": "click_text", "purpose": "Future Tutorial Island Runs", "example": "click_text(\"continue\")", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "lesson", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "title": "CAST_SPELL_NPC is Broken", "problem": "Attempting to cast Wind Strike on a chicken via `CAST_SPELL_NPC Wind_Strike Chicken` caused client issues and required manual intervention.", "solution": "```python\n# BAD - causes client issues\nsend_command(\"CAST_SPELL_NPC Wind_Strike Chicken\")", "why": "Unknown - needs investigation in `PlayerHelpers.java`", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "lesson", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "title": "click_text() > KEY_PRESS space for Dialogue", "problem": "KEY_PRESS space failed to advance dialogue reliably. The hint said \"CLICK_CONTINUE\" but the actual clickable text was \"Click here to continue\".", "solution": "```python\n# BAD - unreliable on Tutorial Island\nsend_command(\"KEY_PRESS space\")\nsend_command(\"KEY_PRESS space\")  # repeat hoping it works", "why": "Tutorial Island may have different dialogue widgets, or timing issues with KEY_PRESS.", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "lesson", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "title": "Ironman Dialogue is Confusing", "problem": "The Ironman question has a two-step flow that looks backwards:\n1. First prompt asks if ready to leave - click \"Yes\"\n2. Second prompt asks about Ironman mode - click \"No\"", "solution": "```python\n# Correct sequence:\nclick_text(\"Yes\")   # Continue with tutorial\nclick_text(\"No\")    # Decline Ironman mode\nclick_text(\"continue\")  # Multiple times until teleport", "why": "The dialogue flow is: \"Yes\" = continue conversation, \"No\" = decline Ironman mode. They're different questions.", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "lesson", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "title": "Door Navigation Pattern", "problem": "Clicking doors from a distance often failed. Needed to walk to the door first.", "solution": "```python\n# BAD - may fail if too far\nsend_command(\"INTERACT_OBJECT Door Open\")", "why": "INTERACT_OBJECT has limited range and pathfinding through closed doors fails.", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "lesson", "source": "journals/tutorial_island_automation_lessons_2026-01-18.md", "title": "Equipment Stats Panel Has Dynamic Widgets", "problem": "Opening the equipment stats panel made inventory items unclickable - bounds returned -1,-1.", "solution": "```python\n# BAD - trying to click items while stats panel is open\nequip_item(\"Bronze dagger\")  # Fails - bounds are -1,-1", "why": "The equipment stats panel uses dynamic/virtual widgets that don't have proper bounds.", "tags": ["combat", "quests", "threading", "widgets"]}
{"type": "reasoning", "source": "journals/use_item_argument_parsing_2025-01-16.md", "input": "Problem: Commands like `USE_ITEM_ON_OBJECT Ghost's skull Coffin` silently failed. The command appeared to dispatch successfully (`{\"dispatched\": true}`) but nothing happened in-game.", "reasoning": "Root cause: The switch statement in `PlayerHelpers.java:10005` only passed `parts[1]` to the handler:\n\n```java\ncase \"USE_ITEM_ON_OBJECT\":\n    return handleUseItemOnObject(parts.length > 1 ? parts[1] : \"\");\n```\n\nWhen the command `USE_ITEM_ON_OBJECT Ghost's skull Coffin` was split on spaces:\n- `parts[0]` = \"USE_ITEM_ON_OBJECT\"\n- `parts[1]` = \"Ghost's\"  \u2190 Only this was passed!\n- `parts[2]` = \"skull\"\n- `parts[3]` = \"Coffin\"\n\nThe handler at line 14397 received only \"Ghost's\" and couldn't find a space to split it", "tags": ["combat", "naming", "quests"]}
{"type": "command_usage", "source": "journals/use_item_argument_parsing_2025-01-16.md", "command": "get_logs(grep=\"USE_ITEM\")", "purpose": "See what the handler actually received", "example": null, "tags": ["combat", "naming", "quests"]}
{"type": "command_usage", "source": "journals/use_item_argument_parsing_2025-01-16.md", "command": "get_command_examples(command=\"USE_ITEM_ON_OBJECT\")", "purpose": "Verify expected format", "example": null, "tags": ["combat", "naming", "quests"]}
{"type": "command_usage", "source": "journals/use_item_argument_parsing_2025-01-16.md", "command": "find_command(command=\"USE_ITEM_ON_OBJECT\")", "purpose": "Find switch case and handler", "example": null, "tags": ["combat", "naming", "quests"]}
{"type": "command_usage", "source": "journals/use_item_argument_parsing_2025-01-16.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(grep=\"USE_ITEM\")", "tags": ["combat", "naming", "quests"]}
{"type": "command_usage", "source": "journals/use_item_argument_parsing_2025-01-16.md", "command": "get_command_examples", "purpose": "Execute command", "example": "get_command_examples(command=\"USE_ITEM_ON_OBJECT\")", "tags": ["combat", "naming", "quests"]}
{"type": "lesson", "source": "journals/use_item_argument_parsing_2025-01-16.md", "title": "Switch Statement Argument Passing is Inconsistent", "problem": "Some commands correctly join all remaining args, others only pass `parts[1]`.", "solution": "```java\n// BAD - only works for single-word arguments\nreturn handleUseItemOnObject(parts.length > 1 ? parts[1] : \"\");", "why": "Copy-paste errors. Simple single-arg commands use `parts[1]`, but multi-word commands need the full args.", "tags": ["combat", "naming", "quests"]}
{"type": "reasoning", "source": "journals/use_item_on_object_impostor_handling_2025-01-16.md", "input": "Problem: `USE_ITEM_ON_OBJECT Ghost's skull coffin` failed with \"Object not found or not clickable\" even though `scan_tile_objects(\"coffin\")` found the coffin 2 tiles away. The command `INTERACT_OBJECT Coffin Open` worked fine on the same object.", "reasoning": "Root cause: OSRS objects with multiple states (open/closed doors, chests, coffins) use **impostor IDs**. The base `ObjectComposition` from `client.getObjectDefinition(id)` may return null or a different name, but calling `comp.getImpostor()` returns the actual transformed state with the correct name.\n\n**Working code** (`ScanTileObjectsCommand.java:226-228`):\n```java\nObjectComposition comp = client.getObjectDefinition(id);\nif (comp != null && comp.getImpostorIds() != null)\n{\n    comp = comp.getImpostor();  /", "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/use_item_on_object_impostor_handling_2025-01-16.md", "command": "scan_tile_objects(\"coffin\")", "purpose": "Verify object exists and get exact name (handles impostors)", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/use_item_on_object_impostor_handling_2025-01-16.md", "command": "get_logs(level=\"ALL\", grep=\"USE_ITEM\")", "purpose": "See full execution chain including errors", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/use_item_on_object_impostor_handling_2025-01-16.md", "command": "get_command_response()", "purpose": "Check actual success/failure response", "example": null, "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/use_item_on_object_impostor_handling_2025-01-16.md", "command": "scan_tile_objects", "purpose": "Execute command", "example": "scan_tile_objects(\"coffin\")", "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/use_item_on_object_impostor_handling_2025-01-16.md", "command": "scan_tile_objects", "purpose": "Execute command", "example": "scan_tile_objects(\"coffin\")", "tags": ["navigation", "widgets"]}
{"type": "command_usage", "source": "journals/use_item_on_object_impostor_handling_2025-01-16.md", "command": "get_logs", "purpose": "Execute command", "example": "get_logs(level=\"ALL\", grep=\"USE_ITEM\")", "tags": ["navigation", "widgets"]}
{"type": "lesson", "source": "journals/use_item_on_object_impostor_handling_2025-01-16.md", "title": "Always Handle Impostors When Looking Up Object Names", "problem": "Object name lookup failed for transformed objects (doors, chests, coffins).", "solution": "```java\n// BAD - fails for transformed objects\nObjectComposition comp = client.getObjectDefinition(obj.getId());\nif (comp.getName().equalsIgnoreCase(targetName)) { ... }", "why": "Base ObjectComposition doesn't have the current state's name - the impostor does.", "tags": ["navigation", "widgets"]}
{"type": "lesson", "source": "journals/use_item_on_object_impostor_handling_2025-01-16.md", "title": "Inconsistent Patterns Across Commands Cause Bugs", "problem": "`INTERACT_OBJECT` used `interactionSystem.interactWithGameObject()` (which handles impostors), but `USE_ITEM_ON_OBJECT` had inline scene iteration that didn't.", "solution": "Either use the established wrappers (`interactionSystem`, `gameHelpers`) or ensure inline code matches their patterns.", "why": "Copy-paste of scene iteration code without copying the impostor handling.", "tags": ["navigation", "widgets"]}
{"type": "code_correction", "source": "journals/yaml_variable_interpolation_2026-01-17.md", "bad_code": "config:\n  raw_food: \"Raw swordfish\"  # Store with spaces (human-readable)\n\nsteps:\n  # BAD - spaces in command args break parsing\n  args: \"${raw_food} 28\"  # -> \"Raw swordfish 28\" (parsed wrong)\n\n  # GOOD - |underscore filter for command args\n  args: \"${raw_food|underscore} 28\"  # -> \"Raw_swordfish 28\" (correct)\n  await_condition: \"has_item:${raw_food}\"  # -> \"has_item:Raw swordfish\" (spaces OK here)", "bad_explanation": "Store with spaces (human-readable); BAD - spaces in command args break parsing; -> \"Raw swordfish 28\" (parsed wrong)", "good_code": null, "good_explanation": null, "tags": ["fishing", "widgets"]}
{"type": "lesson", "source": "journals/yaml_variable_interpolation_2026-01-17.md", "title": "Underscore Filter for Command Args", "problem": "Item names have two forms - commands need underscores, conditions need spaces.", "solution": "```yaml\nconfig:\n  raw_food: \"Raw swordfish\"  # Store with spaces (human-readable)", "why": "Plugin command parser splits on spaces. `BANK_WITHDRAW Raw swordfish 28` parses as 4 args, not 3.", "tags": ["fishing", "widgets"]}
