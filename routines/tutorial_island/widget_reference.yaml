# Tutorial Island Widget Reference
# STATUS: IN PROGRESS
#
# Widget IDs discovered during Tutorial Island automation.
# Note: Tutorial Island uses different widget structures than main game!
#
# ==========================================
# KEY PRINCIPLE: ALWAYS USE WIDGET IDs!
# ==========================================
# NEVER use coordinate-based clicking (send_input click x y)
# Coordinate clicks cause server disconnections on Tutorial Island
# ALWAYS use: CLICK_WIDGET <id> "action" or CLICK_CHILD_WIDGET
# ==========================================

# Tab Widgets (Main Game - may not work on Tutorial Island)
tabs:
  combat_tab: 35913808       # (548 << 16) | 0x50
  skills_tab: 35913809       # (548 << 16) | 0x51  - NOT VISIBLE on Tutorial Island
  quest_tab: 35913810        # (548 << 16) | 0x52
  inventory_tab: 35913811    # (548 << 16) | 0x53
  equipment_tab: 35913812    # (548 << 16) | 0x54
  prayer_tab: 35913813       # (548 << 16) | 0x55
  magic_tab: 35913814        # (548 << 16) | 0x56

# Tutorial Island Tab Widgets (VALIDATED 2026-01-18)
tutorial_tabs:
  equipment_tab: 35913771    # find_and_click_widget(text="Worn Equipment") - VALIDATED
  combat_options_tab: 35913792  # Has action "Combat Options" - VALIDATED
  # Note: Use find_and_click_widget instead of hardcoded IDs when possible

# Icon Widgets (clickable)
icons:
  inventory_icon: 35913795   # Opens inventory - WORKS
  settings_tab: 35913780     # Spanner icon - Settings

# Inventory Widgets
inventory:
  container: 9764864         # Inventory container widget

# Dialogue Widgets
dialogue:
  continue_button: 12648448  # "Click here to continue" button
  # Action: "Continue"

# Banking Widgets
banking:
  deposit_box_container: 12582914  # (192 << 16) + 2
  deposit_inventory: 786476        # (12 << 16) + 44
  bank_item_container: 786445

# Experience Selection (Tutorial Island specific)
experience_selection:
  parent_widget: 7995392     # Group 122 experience selection
  # Static children:
  # index 0 = "I'm brand new"
  # index 1 = "I've played before"
  # index 2 = "I'm an experienced player"

# Tutorial Island Widget Groups (add to ScanWidgetsCommand.java for deep scans)
tutorial_groups:
  - 122   # Experience selection
  - 263   # Tutorial hint box (current objective) - USE scan_widgets(group=263) TO READ
  - 303   # Tutorial container
  - 614   # Tutorial hints
  - 651   # Tutorial buttons
  - 678   # Character creation
  - 708   # Tutorial container
  - 928   # Experience selection popup (actual clickable options)

# HOW TO READ CURRENT TUTORIAL OBJECTIVE:
# scan_widgets(group=263) returns the hint box text, e.g.:
# "<col=0000ff>Settings menu</col><br>Talk to the Gielinor Guide to continue."
# Note: Widget 17235969 contains the full text
# This is HIDDEN during dialogues - use get_dialogue() instead when dialogue is open

# Commands Reference
commands:
  # Inventory
  open_inventory: 'CLICK_WIDGET 35913795 "Inventory"'

  # Dialogue
  click_continue: 'CLICK_WIDGET 12648448 "Continue"'

  # Experience Selection (Tutorial Island)
  select_experienced: 'CLICK_CHILD_WIDGET 7995392 2 static'
  select_played_before: 'CLICK_CHILD_WIDGET 7995392 1 static'
  select_brand_new: 'CLICK_CHILD_WIDGET 7995392 0 static'

# PITFALLS DISCOVERED:
# - TAB_OPEN skills fails on Tutorial Island - widget (548, 0x51) not visible
# - Must use direct widget clicks or find Tutorial Island-specific widgets
# - Tutorial Island fishing spots use action "Net" not "Small Net"
# - Coordinate-based clicking causes server disconnections!
#
# COMMAND NAMING CONVENTIONS (CRITICAL - 2026-01-25):
# - NPC names: Use UNDERSCORES in commands (Survival_Expert, Fishing_spot)
#   Plugin converts underscores to spaces internally for matching
# - Object names: Use LOWERCASE as shown by scan_tile_objects (tree, gate, door)
#   Case-sensitive! "Tree" won't match "tree"
# - Actions can have SPACES: "Chop down", "Climb-up", "Talk-to"
#   Commands use args.split(" ", 2) to allow spaces in actions
# - INTERACT_NPC has range limit (~10 tiles) - walk closer with GOTO first!
#
# Widget IDs discovered (VALIDATED 2026-01-25):
# - Skills tab: 35913793 (action "Skills")
# - Inventory tab: 35913795 (action "Inventory")
#
# INVENTORY ITEM INTERACTION (FIXED 2026-01-18):
# 1. Equipment stats panel uses DYNAMIC WIDGETS - bounds return -1,-1
#    FIX: Press ESC to close panel, use regular inventory
# 2. find_widget for inventory items returned WRONG BOUNDS (slot 0 for all items)
#    FIX: ScanWidgetsCommand.java now calculates grid position from slot index
# 3. equip_item() clicked first "Wield"-able item instead of specific item
#    FIX: equip_item now uses xdotool with bounds from find_widget
#
# WORKING PATTERNS (2026-01-18):
# - Dialogue advancement: KEY_PRESS space (most reliable)
# - Equipment tab: find_and_click_widget(text="Worn Equipment")
# - Combat tab: CLICK_WIDGET 35913792
# - Equipping items: equip_item(item_name="X") - works after fix
# - Attacking NPCs: INTERACT_NPC Giant_rat Attack
#
# SKILLS TAB INVESTIGATION (BLOCKED - need client running):
# Widget 35913809 (group 548, child 0x51) is NOT VISIBLE on Tutorial Island
# Attempts that FAILED:
#   - CLICK_WIDGET 35913809 → "widget not found or hidden"
#   - KEY_PRESS F2 → no effect
#   - Coordinate clicking → caused disconnections
# Next step: Deep scan for Tutorial Island skills widget when client available

# NAVIGATION DISCOVERIES (2026-01-25):
#
# COOKING TO QUEST GUIDE PATH:
# The path from cooking area to Quest Guide building is tricky due to invisible fences.
# CRITICAL: Must go WEST first, then NORTH along western edge.
#
# Key doors:
# - Cooking exit door: (3072, 3090) - leads toward Quest Guide
#   IMPORTANT: Walk IN FRONT at (3073, 3090) before INTERACT_OBJECT door Open
# - Quest Guide door: (3086, 3126)
#
# Validated waypoints (in order):
# 1. (3073, 3090) - In front of cooking exit door
# 2. (3072, 3100) - North along west edge
# 3. (3072, 3110) - Continue north
# 4. (3080, 3120) - Toward Quest Guide building
# 5. (3086, 3125) - At Quest Guide door
#
# QUEST GUIDE SECTION:
# - Quest Journal tab widget: 35913794
# - Quest Guide NPC location: (3084, 3121)
# - Ladder to mining: (3088, 3119) with action "Climb-down"
# - After ladder: Player arrives at approximately (3088, 9520) underground
#
# DOOR INTERACTION PATTERN:
# ALWAYS walk IN FRONT of a door before trying to open it.
# INTERACT_OBJECT may fail if you're not close enough or at wrong angle.
