# Tutorial Island - Part 2: Gielinor Guide
# STATUS: VALIDATED
#
# This routine handles the Gielinor Guide interaction after experience selection.
# Includes talking to the guide, opening settings, and exiting through the door.

name: "Tutorial Island - Gielinor Guide"
type: tutorial
phase: 2

# Key NPCs and Objects
npcs:
  gielinor_guide:
    id: 3308
    location: {x: 3093, y: 3107, plane: 0}

objects:
  exit_door:
    id: 9398
    location: {x: 3098, y: 3107, plane: 0}

widgets:
  settings_tab: 35913780  # Spanner icon with actions: Settings, Controls, Audio

steps:
  - id: 1
    description: "Talk to Gielinor Guide"
    action: INTERACT_NPC
    args: "Gielinor_Guide Talk-to"

  - id: 2
    description: "Continue dialogue (space)"
    action: KEY_PRESS
    args: "Space"
    delay_before_ms: 2000

  - id: 3
    description: "Continue dialogue (space)"
    action: KEY_PRESS
    args: "Space"
    delay_before_ms: 1000

  - id: 4
    description: "Continue dialogue (space)"
    action: KEY_PRESS
    args: "Space"
    delay_before_ms: 1000

  - id: 5
    description: "Continue dialogue (space)"
    action: KEY_PRESS
    args: "Space"
    delay_before_ms: 1000

  - id: 6
    description: "Open Settings tab when prompted"
    action: CLICK_WIDGET
    args: "35913780"
    delay_before_ms: 1000
    # VALIDATED: Widget 35913780 has actions "Settings", "Controls", "Audio"
    # Found via: find_widget(text="Settings")

  - id: 7
    description: "Talk to Gielinor Guide again"
    action: INTERACT_NPC
    args: "Gielinor_Guide Talk-to"
    delay_before_ms: 1000

  - id: 8
    description: "Continue dialogue (space)"
    action: KEY_PRESS
    args: "Space"
    delay_before_ms: 2000

  - id: 9
    description: "Continue dialogue (space)"
    action: KEY_PRESS
    args: "Space"
    delay_before_ms: 1000

  - id: 10
    description: "Continue dialogue (space)"
    action: KEY_PRESS
    args: "Space"
    delay_before_ms: 1000

  - id: 11
    description: "Open the door to exit"
    action: INTERACT_OBJECT
    args: "Door Open"
    delay_before_ms: 1000
    # VALIDATED: Must use "Door" (capitalized), not "door" lowercase
    # get_transitions shows correct casing; scan_tile_objects shows lowercase

# After this routine:
# Player should be outside the building, ready for Survival Expert (03_survival_expert.yaml)
# The hint box says "Follow the path to find the Survival Instructor"
